<html>
<header>
    <title>
        Ubisoft Test Parent
    </title>
    <style>
        .full {
            height: 100%;
            float: left;
        }

        .half {
            height: 50%;
            float: left;
        }

        .code-container {
            display: inline;
            float: left;
            width: 60vw;
        }

        .code-window {
            text-align: left;
            display: block;
            margin-left: 20px;
            background-color: rgb(203, 203, 203);
            overflow-x: scroll;

        }
    </style>
    <script>
        (function () {
            var PLATFORM_ID = "emma-demo_platform_20210423002512303-2e3ff8a644aebdc",
                DOMAIN = "emma-demo",
                LANGUAGE = "en";

            window.helpshiftConfig = {
                platformId: PLATFORM_ID,
                domain: DOMAIN,
                language: LANGUAGE
            };
        })();

        !function (t, e) { if ("function" != typeof window.Helpshift) { var n = function () { n.q.push(arguments) }; n.q = [], window.Helpshift = n; var i, a = t.getElementsByTagName("script")[0]; if (t.getElementById(e)) return; i = t.createElement("script"), i.async = !0, i.id = e, i.src = "https://webchat.helpshift.com/latest/webChat.js"; var o = function () { window.Helpshift("init") }; window.attachEvent ? i.attachEvent("onload", o) : i.addEventListener("load", o, !1), a.parentNode.insertBefore(i, a) } else window.Helpshift("update") }(document, "hs-chat");

/* s */        Helpshift("addEventListener", "inputFocusChange", (chatInput) => { console.log(chatInput) });

    </script>
</header>


<body>
    <div class="code-container">
        <pre class="code-window">
    parent.html
    -----------
    &lt;header&gt;
    &lt;script&gt;

        var eventMethod = window.addEventListener
            ? &quot;addEventListener&quot;
            : &quot;attachEvent&quot;;
        var eventer = window[eventMethod];
        var messageEvent = eventMethod === &quot;attachEvent&quot;
            ? &quot;onmessage&quot;
            : &quot;message&quot;;

        eventer(messageEvent, function (e) {

            // if (e.origin !== 'http://the-trusted-iframe-origin.com') return;

            if (e.data === &quot;chatInputActive&quot; || e.message === &quot;chatInputActive&quot;) {
                console.log(&quot;active&quot;);
                document.getElementById('chat-window').classList.replace(&quot;full&quot;, &quot;half&quot;);
            }
            if (e.data === &quot;chatInputInactive&quot; || e.message === &quot;chatInputInactive&quot;) {
                console.log(&quot;inactive&quot;);
                document.getElementById('chat-window').classList.replace(&quot;half&quot;, &quot;full&quot;);
            }
            console.log(e);
        });

    &lt;/script&gt;
    &lt;/header&gt;
    &lt;body&gt;
        &lt;iframe class=&quot;full&quot; id=&quot;chat-window&quot; src=&quot;mockchat.html&quot;&gt;&lt;/iframe&gt;
    &lt;body&gt;
    </pre>
        <pre class="code-window">
mockchat.html
-------------
&lt;body&gt;
    &lt;script&gt;
        function chatOnEnter(event=null){
            console.log(&quot;sending postmessage&quot;);
            parent.postMessage(&quot;chatInputActive&quot;, &quot;*&quot;);
        }
        function chatOnLeave(event=null){
            console.log(&quot;sending postmessage&quot;);
            parent.postMessage(&quot;chatInputInactive&quot;, &quot;*&quot;);
        }
    &lt;/script&gt;
    &lt;form&gt;
        &lt;input type=&quot;text&quot; id=&quot;chat-input-test&quot; value=&quot;please put focus here&quot; onfocus=&quot;chatOnEnter()&quot; onfocusout=&quot;chatOnLeave()&quot;&gt;&lt;/input&gt;  
    &lt;/form&gt;
&lt;/body&gt;

    </pre>
    </div>
</body>

</html>
